## 목차

- [1.1 자, 시작해보자!](#11-자,-시작해보자!)
- [1.2 예시 프로그램을 본 소감](#12-예시-프로그램을-본-소감)
- [1.3 리팩터링의 첫 단계](#13-리팩터링의-첫-단계)
- [1.4 statement() 함수 쪼개기](<#14-statement()-함수-쪼개기>)
- [1.5 중간 점검 : 난무하는 중첩 함수](#15-중간-점검-:-난무하는-중첩-함수)
- [1.6 계산 단계와 포맷팅 단계 분리하기](#16-계산-단계와-포맷팅-단계-분리하기)
- [1.7 중간 점검 : 두 파일(과 두 단계)로 분리됨](<#17-중간-점검-:-두-파일(과-두-단계)로-분리됨>)
- [1.8 다형성을 활용해 계산 코드 재구성하기](#18-다형성을-활용해-계산-코드-재구성하기)
- [1.9 상태 점검 : 다형성을 활용하여 데이터 생성하기](#19-상태-점검-:-다형성을-활용하여-데이터-생성하기)
- [1.10 마치며](#110-마치며)

## 1.1 자, 시작해보자!

## 1.2 예시 프로그램을 본 소감

> 수백줄 짜리 코드를 수정할 떄면, 먼저 프로그램의 작동 방식을 더 쉽게 파악할 수 있도록 코드를 여러 함수와 프로그램 요소로 `재구성` 한다.

프로그램이 새로운 기능을 추가하기에 편한 구조가 아니라면, 먼저 기능을 추가하기 쉬운 형태로 리팩터링하고 나서 원하는 기능을 추가한다.

## 1.3 리팩터링의 첫 단계

> 코드 영역을 꼼꼼하게 검사해줄 테스트 코드들 부터 마련해야 한다.

결국 코드를 확인하고, 수정하는 것이 인간의 역할이기 때문에 실수가 발생하기 마련이다. 이 문제를 해결해줄 수 있는 방법이. 테스트 코드를 작성하는 것이다.

## 1.4 statement() 함수 쪼개기

코드를 분석해, 함수의 쪼갤 부분을 찾았을 때, 재빨리 코드에 반영해야 한다.(인간의 뇌는 휘발성이기 때문에 다시 볼때 또 다시 분석애야 하는 문제가 발생할 수 있다.)

`명확한` `이름`과, `주석`을 통해 적어놓는다면, 코드를 다시 분석하지 않아도, 코드가 스스로 자신이 해야할 일이 무엇인지 이야기 해준다.

아무리 간단한 수정이라도 리팩터링 후에는 항상 테스트하는 습관을 들이는 것이 좋다.

한 번에 너무 많이 수정하려다 실수를 저지르면 디버깅하기 어려워 결과적으로 작업 시간이 늘어날 수 있다.

> 조금씩 수정, 수정 후 테스트

> 변수명을 변경시에는 단번에 좋은 변수 이름이 떠오르지 않을 수 있다. 이 경우, 좋은 변수명이 떠오를 때 바꾸면 된다.

위에서 리팩터링한 부분

- 반복문 쪼개기(8.7)
- 문장 슬라이스하기(8.6)
- 함수 추출하기(6.1)
- 변수 인라인하기(6.4)

## 1.5 중간 점검 : 난무하는 중첩 함수

위 작업들은, 함수 내부에서 함수를 만드는 중첩 함수 형식으로 진행되었다.

그 결과, 최상위 함수의 코드줄은 현저하기 줄어들었고, 이해하기도 쉬운 코드가 되었다.

## 1.6 계산 단계와 포맷팅 단계 분리하기

위 내용들은, 한 마디로 기존의 코드들을 보기쉽게 바꾸는 행위에 지나지 않는다.
기존 텍스트 버전의 값을 HTML버전으로 옮기는 작업을 진행함

여기서 고려해야 할 점은, 기존의 계산 함수들을 모두 그대로 사용해야 작업량이 늘지 않는다는 것이다.

## 1.7 중간 점검 : 두 파일(과 두 단계)로 분리됨

모듈화를 통해서, 전체 코드의 길이는 늘어나지만, 서로 다른 부분과 서로 맞물려 돌아가는 과정을 파악하기 쉬워진다.

## 1.8 다형성을 활용해 계산 코드 재구성하기

> 조건부 로직을 다형성으로 바꾸기

현재 코드는 여러개의 계산 함수로 나눠져있는데, 이런 계산 함수들을 하나의 `클래스`로 만들어서 다형성을 활용하는 방식으로 바꾼다.

## 1.9 상태 점검 : 다형성을 활용하여 데이터 생성하기

앞으로 수정이 이러질 것 같다면, 명확하게 분리해두면 좋다.

추가적인 기능을 추가할 때도, 분리해 놓은 클래스를 활용해서 기능을 구현한다.

같은 타입의 다형성을 기반으로 실행되는 함수가 많을수록 이런식으로 구성하는쪽이 유리하다.

## 1.10 마치며

해당 챕터에서는 크게 세 단계로 리팩터링을 진행했다.

- 원본 함수를 중첩 함수 여러개로 나누기
- 단계 쪼개기를 적용해, 계산코드와 출력코드를 분리
- 계산로직을 다형성으로 표현

해당 단계들을 진행하면서 각 코드가 수행하는 일이 더욱 분명하게 드러났다.

> 좋은 코드란 "얼마나 수정하기 쉬운가"로 가늠할 수 있다.
